drop database if exists muhangtest;
drop table if exists t1;
create database muhangtest;
use muhangtest;
result_format: 4
explain_protocol: 0
create table t1 (c1 int(11) not null, c2 int(11) not null, c3 int(11) not null, primary key (c1, c2, c3)) partition by key(c2) partitions 4;

drop table if exists t7;
create table t7(a int, b int, c int, d int, primary key (a)) partition by hash(a) partitions 3;
insert into t7 values(1,2,3,4);
insert into t7 values(2,3,5,6);
select /*+blocking('all'), NO_REWRITE use_px */ * from t7 as A, t7 as B where A.a = B.a and exists(select * from t7 where t7.a=B.a);
+---+------+------+------+---+------+------+------+
| a | b    | c    | d    | a | b    | c    | d    |
+---+------+------+------+---+------+------+------+
| 1 |    2 |    3 |    4 | 1 |    2 |    3 |    4 |
| 2 |    3 |    5 |    6 | 2 |    3 |    5 |    6 |
+---+------+------+------+---+------+------+------+

drop table if exists t1;
drop table if exists t7;
drop database if exists muhangtest;
